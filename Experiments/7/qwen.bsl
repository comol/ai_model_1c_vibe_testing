// Форма-приемник данных из табличной части

&НаКлиенте
Перем ДанныеТоваров;

&НаКлиенте
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	// Инициализация формы
	ДанныеТоваров = Новый Массив;
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	// При открытии формы очищаем табличную часть
	Элементы.ТоварыПриемник.ДанныеФормы.Очистить();
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник) Экспорт
	// Обработка оповещения о передаче данных
	Если ИмяСобытия = "ПередачаДанных" Тогда
		ДанныеТоваров = Параметр;
		ЗаполнитьТабличнуюЧасть();
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьТабличнуюЧасть()
	// Заполняем табличную часть полученными данными
	Элементы.ТоварыПриемник.ДанныеФормы.Очистить();
	
	Для Каждого Элемент Из ДанныеТоваров Цикл
		НоваяСтрока = Элементы.ТоварыПриемник.ДанныеФормы.Добавить();
		НоваяСтрока.Номенклатура = Элемент.Номенклатура;
		НоваяСтрока.Количество = Элемент.Количество;
		НоваяСтрока.Цена = Элемент.Цена;
		НоваяСтрока.Сумма = Элемент.Сумма;
	КонецЦикла;
	
	// Обновляем отображение табличной части
	Элементы.ТоварыПриемник.Обновить();
КонецПроцедуры

&НаКлиенте
Функция ПолучитьДанныеТоваров() Экспорт
	// Возвращает массив переданных данных
	Возврат ДанныеТоваров;
КонецФункции
