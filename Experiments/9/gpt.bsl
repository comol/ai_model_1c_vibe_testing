&НаКлиенте
Процедура ПриОткрытии() Экспорт
	// Отобразить картинку из реквизита при открытии формы.

	УстановитьКартинкуИзРеквизита();

	// Сделать декорацию кликабельной (для срабатывания события Нажатие).

	Если ЭлементыФормы.Найти("Картинка") <> Неопределено Тогда

		ЭлементыФормы.Картинка.Гиперссылка = Истина;

	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура КартинкаНажатие() Экспорт
	// Выбор файла изображения и запись результата в реквизит объекта.

	Диалог = Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.Открытие);
	Диалог.Заголовок = "Выберите файл изображения";
	Диалог.ПолноеИмяФайла = "";
	Диалог.ПредварительныйПросмотр = Истина;
	Диалог.МножественныйВыбор = Ложь;

	Диалог.Фильтр =
		"Все картинки (*.bmp;*.dib;*.rle;*.jpg;*.jpeg;*.tif;*.tiff;*.gif;*.png;*.ico;*.wmf;*.emf)|" +
		"*.bmp;*.dib;*.rle;*.jpg;*.jpeg;*.tif;*.tiff;*.gif;*.png;*.ico;*.wmf;*.emf|" +
		"BMP (*.bmp;*.dib;*.rle)|*.bmp;*.dib;*.rle|" +
		"JPEG (*.jpg;*.jpeg)|*.jpg;*.jpeg|" +
		"TIFF (*.tif;*.tiff)|*.tif;*.tiff|" +
		"GIF (*.gif)|*.gif|" +
		"PNG (*.png)|*.png|" +
		"ICO (*.ico)|*.ico|" +
		"Метaфайл (*.wmf;*.emf)|*.wmf;*.emf";

	Если Не Диалог.Выбрать() Тогда

		Возврат;

	КонецЕсли;

	ИмяФайла = Диалог.ПолноеИмяФайла;

	// Создать двоичные данные из выбранного файла.

	ДвоичныеДанныеИзображения = Новый ДвоичныеДанные(ИмяФайла);

	// Сохранить в реквизит и обновить картинку на форме.

	Объект.Картинка = Новый ХранилищеЗначения(ДвоичныеДанныеИзображения);

	ЭлементыФормы.Картинка.Картинка = Новый Картинка(ДвоичныеДанныеИзображения);

КонецПроцедуры

&НаКлиенте
Процедура УстановитьКартинкуИзРеквизита() Экспорт
	// Устанавливает картинку декорации из реквизита объекта, если он заполнен.

	Если Объект.Картинка = Неопределено Тогда

		Возврат;

	КонецЕсли;

	ЗначениеХранилища = Объект.Картинка.Получить();

	Если ЗначениеХранилища = Неопределено Тогда

		Возврат;

	КонецЕсли;

	Если ТипЗнч(ЗначениеХранилища) = Тип("ДвоичныеДанные") Тогда

		ЭлементыФормы.Картинка.Картинка = Новый Картинка(ЗначениеХранилища);
		Возврат;

	КонецЕсли;

	Если ТипЗнч(ЗначениеХранилища) = Тип("Картинка") Тогда

		ЭлементыФормы.Картинка.Картинка = ЗначениеХранилища;
		Возврат;

	КонецЕсли;

КонецПроцедуры