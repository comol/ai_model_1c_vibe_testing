// Создаем таблицу значений
Таблица = Новый ТаблицаЗначений;
Таблица.Колонки.Добавить("Номенклатура");
Таблица.Колонки.Добавить("Количество", Новый ОписаниеТипов("Число"));
Таблица.Колонки.Добавить("Сумма", Новый ОписаниеТипов("Число"));
Таблица.Колонки.Добавить("Дата", Новый ОписаниеТипов("Дата"));

// Заполняем тестовыми данными
Строка1 = Таблица.Добавить();
Строка1.Номенклатура = "Товар1";
Строка1.Количество = 10;
Строка1.Сумма = 1000;
Строка1.Дата = '20230101';

Строка2 = Таблица.Добавить();
Строка2.Номенклатура = "Товар1";
Строка2.Количество = 5;
Строка2.Сумма = 600;
Строка2.Дата = '20230102';

Строка3 = Таблица.Добавить();
Строка3.Номенклатура = "Товар2";
Строка3.Количество = 8;
Строка3.Сумма = 800;
Строка3.Дата = '20230103';

// Функция списания товара по FIFO
Функция СписатьТовар(ТЗ, Номенклатура, КоличествоДляСписания)
    
    // Отбираем партии по номенклатуре и сортируем по дате (FIFO)
    Выборка = ТЗ.Выбрать();
    Выборка.УстановитьОтбор("Номенклатура", Номенклатура);
    Выборка.Сортировать("Дата");
    
    ОстатокСписания = КоличествоДляСписания;
    
    Пока Выборка.Следующий() И ОстатокСписания > 0 Цикл
        Строка = Выборка.Текущая();
        
        Если Строка.Количество >= ОстатокСписания Тогда
            // Списание из текущей партии
            Строка.Количество = Строка.Количество - ОстатокСписания;
            ОстатокСписания = 0;
        Иначе
            // Полное списание партии
            ОстатокСписания = ОстатокСписания - Строка.Количество;
            Строка.Количество = 0;
        КонецЕсли;
    КонецЦикла;
    
    // Удаляем полностью списанные партии
    Для i = ТЗ.Количество() - 1 По 0 Цикл
        Если ТЗ[i].Количество = 0 Тогда
            ТЗ.Удалить(i);
        КонецЕсли;
    КонецЦикла;
    
    Возврат ОстатокСписания = 0; // True если списание прошло полностью
    
КонецФункции

// Пример использования
УспешноеСписание = СписатьТовар(Таблица, "Товар1", 12);