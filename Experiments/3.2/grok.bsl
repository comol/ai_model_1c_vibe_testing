// Запрос для получения актуальной цены на заданную дату
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	Цены.Номенклатура КАК Номенклатура,
|	МАКСИМУМ(Цены.Дата) КАК Дата
|ПОМЕСТИТЬ ВтМаксимумы
|ИЗ
|	РегистрСведений.ЦеныТовара КАК Цены
|ГДЕ
|	Цены.Дата <= &Дата
|
|СГРУППИРОВАТЬ ПО
|	Цены.Номенклатура
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	Максимумы.Номенклатура КАК Номенклатура,
|	Цены.Цена КАК Цена
|ИЗ
|	ВтМаксимумы КАК Максимумы
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныТовара КАК Цены
|		ПО Максимумы.Номенклатура = Цены.Номенклатура
|			И Максимумы.Дата = Цены.Дата";

Запрос.УстановитьПараметр("Дата", Дата); // Здесь Дата - переменная с заданной датой

РезультатЗапроса = Запрос.Выполнить();

Выборка = РезультатЗапроса.Выбрать();

Пока Выборка.Следующий() Цикл
	// Обработка: Выборка.Номенклатура, Выборка.Цена
КонецЦикла;